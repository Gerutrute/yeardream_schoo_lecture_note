EQUI JOIN

-두 개의 테이블 간에 서로 정확하게 일치하는 경우를 활용하는 조인



SQL JOIN 종류

| JOIN 종류    | 설명                     | 기둥이 되는 행        |
|----------------|---------------------------------------------|----------------------------|
| **INNER JOIN** | 양쪽 테이블 모두 일치하는 값만 반환       | 교집합 (둘 다 있는 데이터)   |
| **LEFT JOIN** | 왼쪽 테이블은 전부, 오른쪽은 일치하는 값만    | 왼쪽 기준, 오른쪽은 NULL    |
| **RIGHT JOIN** | 오른쪽 테이블 전부, 왼쪽은 일치하는 값만     | 오른쪽 기준, 왼쪽은 NULL    |
| **FULL OUTER JOIN** | 양쪽 테이블 모두 (전체 합)         | 모든 데이터         |
| **CROSS JOIN** | 두 테이블의 모든 조합 (카티션 곱)        | 모든 조합          |
| **SELF JOIN** | 자기 자신과 조인 (ex: 상사-직원 구조)       | 한 테이블로 두 번 연결     |

INNER JOIN

- 내부 JOIN이라고 하며 JOIN 조건에서
동일한 값이 있는 행만 반환
- INNER JOIN은 기본값으로 'INNER' 생략 가능

SELECT + FROM USER a JOIN CLASS B

ON a.CLASS = b.ID

예시

| USER_ID | NAME   | CLASS_ID |
|---------|-----------|----------|
| 1000  | 모자장수  | 001   |
| 1001  | 엘리스토끼 | 001   |
| 1002  | 체셔   | 002   |
| 1003  | 토토세   | 001   |

(+)

| ID  | CLASS |
|------|-------|
| 001 | A   |
| 002 | B   |

---

| USER_ID | NAME   | CLASS_ID | ID  | CLASS |
|---------|-----------|----------|------|-------|
| 1000  | 모자장수  | 001   | 001 | A   |
| 1001  | 엘리스토끼 | 001   | 001 | A   |
| 1002  | 체셔   | 002   | 002 | B   |
| 1003  | 토토세   | 001   | 001 | A   |

JOIN 특징
| 특징                 | 설명                                                   |
|----------------------|--------------------------------------------------------|
| 조인 대상            | 두 테이블                                             |
| 조인 조건            | ex) 테이블1.컬럼 = 테이블2.컬럼                       |
| 집합연산 탈락 가능   | ON 절을 사용하면 집합이 탈락되는 조인 가능             |
| 일치하지 않으면 제외 | INNER JOIN은 조건이 일치하지 않으면 해당 튜플 제외    |
| NULL 허용 여부       | 조건에 맞는 열만 나오므로 NULL이 배정될 여지가 없음    |

USING 조건절
- 같은 이름을 가진 컬럼들 중 원하는 컬럼에 대하서만 선택적으로 등가 조인 가능, SQL Server에서는 지원X

SELECT e.name, d.dept_name
FROM employees e
JOIN departments d
USING (dept_id);

| id | name   | dept_id | position       | hire_date   |
|----|--------|---------|----------------|-------------|
| 1  | Alice  | 1       | Manager        | 2021-11-15  |
| 2  | Bob    | 2       | Engineer       | 2020-03-08  |
| 3  | Carol  | 2       | HR Specialist  | 2021-07-12  |

(+)

| dept_id | dept_name    | location       | budget  |
|---------|--------------|----------------|---------|
| 1       | HR           | New York       | 300000  |
| 2       | Engineering  | San Francisco  | 400000  |
| 3       | Marketing    | Chicago        | 200000  |

---

| name   | dept_name    |
|--------|--------------|
| Alice  | HR           |
| Bob    | Engineering  |
| Carol  | Engineering  |

NATURAL JOIN
- 두 테이블 간의 동일한 이름을 갖는 모든 칼럼들에 대해 등가 조인(같은 속성끼리 뭉침)을 수행

SELECT * FROM 테이블1 NATURAL JOIN 테이블2;
뒤에 다른걸 붙이면 안됨.

예시

| ID    | NAME      | CLASS_ID |
|-------|----------|----------|
| 1000  | 모자장수   | 001      |
| 1001  | 엘리스토끼 | 001      |
| 1002  | 체셔      | 002      |
| 1003  | 토도세     | 002      |

(+)

| CLASS_ID | CLASS |
|----------|-------|
| 001      | A     |
| 002      | B     |

---
| ID    | NAME      | CLASS_ID | CLASS |
|-------|----------|----------|-------|
| 1000  | 모자장수   | 001      | A     |
| 1001  | 엘리스토끼 | 001      | A     |
| 1002  | 체셔      | 002      | B     |
| 1003  | 토도세     | 002      | B     |

NATURAL JOIN vs INNER JOIN
| 항목                     | NATURAL JOIN (자연조인)                                                                                  | INNER JOIN (이너조인)                                                                  |
|-------------------------|--------------------------------------------------------------------------------------------------------|----------------------------------------------------------------------------------------|
| **공통점**              | 두 테이블을 조인한다                                                                                       | 두 테이블을 조인한다                                                                     |
| **기본 조건**           | 공통 칼럼명이 같으면 자동으로 매핑 (별도의 ON 절 없이 수행)                                                  | 공통 칼럼(또는 key)을 기준으로, ON 조건을 사용해 일치하는 행만 반환                       |
| **조인 조건 지정 여부** | NATURAL JOIN은 조인 조건을 명시적으로 작성하지 않아도 수행 가능  <br> (예: `SELECT ... FROM t1 NATURAL JOIN t2;`) | INNER JOIN은 ON 절을 이용해 구체적으로 조건 지정  <br> (예: `SELECT ... FROM t1 INNER JOIN t2 ON t1.col = t2.col;`) |
| **일치하지 않을 시**     | 해당 행(튜플)은 결과에서 제외                                                                               | 해당 행(튜플)은 결과에서 제외                                                             |
| **주의사항**            | - 공통 칼럼이 많거나 중복될 경우, 어느 컬럼으로 조인되는지 혼동 가능  <br> - 특정 칼럼명이 중복일 때 `USING`을 통해 제거해야 함 (MySQL, Oracle 등 지원)  | - JOIN 조건이 누락되면 CROSS JOIN이 될 수 있음  <br> - 별칭(ALIAs) 등을 통해 컬럼 구분 가능 |
| **지원 DBMS**           | MySQL, Oracle 등 일부 DBMS에서 지원                                                                          | 대부분 DBMS에서 사용 가능                                                                |

CROSS JOIN

| ID | NAME | PHONE |
|----|------|-------|
| 1  | kim  | 010   |
| 2  | moon | 011   |

(+)

| TRANSPORT_ID | TYPE    |
|--------------|---------|
| 01A          | bus     |
| 01B          | subway  |
| 02A          | cab     |

---

| ID | NAME | PHONE | TRANSPORT_ID | TYPE    |
|----|------|-------|--------------|---------|
| 1  | kim  | 010   | 01A          | bus     |
| 1  | kim  | 010   | 01B          | subway  |
| 1  | kim  | 010   | 02A          | cab     |
| 2  | moon | 011   | 01A          | bus     |
| 2  | moon | 011   | 01B          | subway  |
| 2  | moon | 011   | 02A          | cab     |
